---
title: "JavaScriptでGemini APIを使用するまで"
emoji: "🔖"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["javascript", "gemini", "生成AI", "AI"]
published: true
---

2025年10月現在、いまだにGemini APIは一部無料で使える生成AIのAPIです。
そのため、何かしらAIを使用したアプリを作ろうとしたときによく利用しています。
ただ、「どう設定したら使えるんだっけ?」とわからなくなることが多々あるので、備忘録として手順を残します。

:::message
JavaScriptを使用したGemini APIの使用ができるまでの手順を紹介しています。
:::

## APIキーの準備
まずは、管理画面からAPIキーを用意します。

API管理画面
https://aistudio.google.com/app/api-keys

![](https://storage.googleapis.com/zenn-user-upload/56735c14b8fe-20251007.png)

右上の`APIキーを作成`をクリックして、新しいキーを作成します。

![](https://storage.googleapis.com/zenn-user-upload/ecc6a94abc8c-20251007.png)

「キー名の設定」はわかりやすい名前を付けておきます。
「インポートしたプロジェクトを選択」は、Googleサービスの使用や課金の管理などで使用します。
もし、まだ作成していない場合は、`Create project`から新しくプロジェクトを作成してください。
※始めてプロジェクトを作成する場合は、支払い情報の登録ができていないはずなので、デフォルトで無料枠になる(?)はずです。

![](https://storage.googleapis.com/zenn-user-upload/62902477bb28-20251007.png)
APIキーを生成後は、APIの情報が表示されます。
(この時、割り当てティアのところに`無料枠`と書かれていれば、勝手に課金されない設定になっています。)

キーの青文字をクリックすると、APIキーの詳細情報が表示されます。
![](https://storage.googleapis.com/zenn-user-upload/1c7cc6bc2d8e-20251007.png)
この中に、実際に使用するAPIキーが記載されています。
後ほどAPIキーを使用するので、コピーするなどしておいてください。

## APIを使用する
Gemini APIを使用するためのライブラリをインストールします。
https://ai.google.dev/gemini-api/docs/libraries?hl=ja

今回はJavaScriptを使用するので、`npm install @google/genai`をターミナルで実行します。

実行後、`package.json`にGemini APIのライブラリが記入されていることを確認します。
![](https://storage.googleapis.com/zenn-user-upload/df77f5244dc0-20251007.png)

テストとして、下記の内容を記述するjsファイルを作成します。
`YOUR_API_KEY`は先ほどコピーしたAPIキーを入力してください。

``` javascript
import { GoogleGenAI } from "@google/genai";

const ai = new GoogleGenAI({ apiKey: "YOUR_API_KEY" });

async function main() {
  const response = await ai.models.generateContent({
    model: "gemini-2.5-flash",
    contents: "Hello",
  });
  console.log(response.text);
}

main();
```
これをターミナルでnodeで実行すると、下記のように出力されます。
![](https://storage.googleapis.com/zenn-user-upload/91cf4859c4b6-20251007.png)
「Hello! How can I help you today?」と出力されました。


## もうちょっと追加で設定
### .envでAPIキーを管理する
先ほど、APIキーを入力したかと思いますが、ベタ打ちのAPIキーはセキュリティ上避けた方が良いです。
そのため、`.env`ファイルを作成してそこにAPIキーを管理するようにしましょう。

`.env`ファイルを扱うためのツールをインストールします。
```sh
npm i --save dotenv
```

`.env`ファイルを作成して、APIキーを記入します。
```
GEMINI_API_KEY="YOUR_API_KEY"
```

先ほど実行したjsファイルに、dotenvをインポートする記述と、`.env`ファイルから呼び出すAPIキーを取得するように記述します。
```diff javascript
+ import 'dotenv/config';
import { GoogleGenAI } from "@google/genai";

+ const apiKey = process.env.GEMINI_API_KEY;
+ const ai = new GoogleGenAI({ apiKey: apiKey });
- const ai = new GoogleGenAI({ apiKey: "YOUR_API_KEY" });
```

### モジュールシステムをCommonJSからESModuleに変更する
importを使用してライブラリを使用しているために、実行すると警告が表示されます。
`package.json`ファイルに次のように追記します。

```diff json
{
+  "type": "module",
  "dependencies": {
    "@google/genai": "^1.22.0",
    "dotenv": "^17.2.3"
  }
}

```

もう一つ警告が出ています(2025年10月6日現在)が、Gemini APIによるものです。
パッケージの更新を待つと表示されなくなると思うので、一旦は無視して問題ないはずです。

## モデルごとの使用について
無料枠/有料枠で使用できる内容は下記の通りになります。
https://ai.google.dev/gemini-api/docs/pricing?hl=ja